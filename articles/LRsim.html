<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prediction Accuracy with Uncertain Responses • IRRsim</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Prediction Accuracy with Uncertain Responses">
<meta property="og:description" content="IRRsim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IRRsim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/IRRsim.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/LRsim.html">Prediction Accuracy with Uncertain Responses</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jbryer/IRRsim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Prediction Accuracy with Uncertain
Responses</h1>
                        <h4 data-toc-skip class="author">Jason Bryer,
Ph.D.</h4>
            
            <h4 data-toc-skip class="date">2023-04-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jbryer/IRRsim/blob/HEAD/vignettes/LRsim.Rmd" class="external-link"><code>vignettes/LRsim.Rmd</code></a></small>
      <div class="hidden name"><code>LRsim.Rmd</code></div>

    </div>

    
    
<p>The use of predictive modeling in education for predicting student
performance has increase substantially over the last few years (Borray,
2017). Researchers and practitioners estimate, or train, statistical
models with student data where the outcome has already been observed so
that predictions can be made with new students. In the training process
a subset of the data is withheld in order to validate the accuracy of
the prediction model. In these models, it is generally assumed the
predictors are valid and reliable. Moreover, each observation has equal
weight in the modeling process. However, in many situations, researchers
may have additional information with regard to the quality, or
reliability, of each individual measure. This paper explores the impact
of lower quality measures on the accuracy of prediction models,
especially when used for scoring students’ written work.</p>
<p>Rubrics are common tool for measuring student performance (Moskal
&amp; Leydens, 2000). They describe the quality of student work across
multiple criteria. On the rubric, each score level has descriptors that
describe the quality of response for that score. The result is a student
score on an ordinal scale. The reliability of these measures is
typically estimated by having multiple raters score the same student
work. The score is assumed to reliable and accurate when raters agree.
Disagreements are often resolved by either having a third rater score
the student work (and taking the average or mode) or have the two raters
confer and agree a “true” score. There are numerous reasons why raters
may disagree, but regardless of the reason of the disagreement, the
disagreement provides valuable information with regard to the quality,
or confidence, of the score.</p>
<p>If we conceptualize rubric scores as the categorization of an
underlying, but unmeasured, continuous construct, then the disagreements
could be that the actual score is between the scoring levels. One
approach would be taking the average of the two raters thereby
increasing a <em>k</em> level rubric to <span class="math inline">\(2k -
1\)</span> level rubric. However, this us undesirable for predictive
modeling since we wish to predict with the same number of levels as
training dataset.</p>
<p>Another perspective is that if rater A scored a student work a one,
and rater B scored the same work a two, it is possible the work has
qualities (as described in the rubric) of both a one and two. In the
situation where written work (e.g. essay) is quantified for use in
predictive models (e.g. automated scoring engines), the exclusion of a
potential third scoring level could have implications in the accuracy of
statistical models predicting new student scores. Regardless, given the
disagreement of raters, our confidence that the score is clearly a one
or a two is much less that if the raters agreed.</p>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The Hewlett Foundations sponsored a Kaggle competition <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> to advance the
accuracy of automated scoring algorithms. Essay set two (see Appendix A)
includes responses from 1,800 essays from 10th graders with rubric
scores in two domains: writing applications (scores ranging from 1 to 6)
and language conventions (scores ranging from 1 to 4). All essays were
scored by two raters. Given the rarity of of 1s, 5s, and 6s in domain
one and of 1s in domain 2, those essays were excluded leaving 1,682
essays for this analysis.</p>
<p>LightSIDE (Mayfield &amp; Rosé, 2014) was used to extract text
features from the essays (i.e. unigrams, bigrams, include punctuation,
stem N-grams, skip stopwords in N-grams). The training set consisted of
70% of the essays randomly selected with the remaining 30% used for
validation. A multinomial log-linear regression model was used to train
two prediction models: using the entire training set (full model) and
using only essays where the two raters agreed (agreement model). The
<code>nnet</code> (Venables &amp; Ripley, 2002) R (R Core Team, 2019)
package was used for to estimate the models. The accuracy for the
writing applications domain was 0.7% worse for the agreement model but
was better by 5.6% more accurate for the language conventions domain
(Table 1).</p>
<p>Table 1. Prediction accuracy</p>
<table class="table">
<thead><tr class="header">
<th>Domain</th>
<th align="right">Full</th>
<th align="right">Agreement</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1. Writing Applications</td>
<td align="right">63.9%</td>
<td align="right">63.1%</td>
</tr>
<tr class="even">
<td>2. Language Conventions</td>
<td align="right">55.7%</td>
<td align="right">61.3%</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="research-questions">Research Questions<a class="anchor" aria-label="anchor" href="#research-questions"></a>
</h2>
<p>Given the differences in model accuracy for differing data, this
paper is guided by the following research question: What is the impact
of rater disagreements on the accuracy of predicting scores?</p>
</div>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>To explore the impact of lower confidence scores on predictive
models, data will be simulated with a single quantitative predictor
variable for a dichotomous outcome variable. For the predictor variable,
three groups will be simulated from a random normal distribution with
separate means but equivalent standard deviations. Group A with an
outcome of 0, Group B with an outcome of 1, and Group Unknown with a
random outcome with specified probability of outcome (the default is 50%
for each outcome). Group sizes can be specified, but are <span class="math inline">\(n_A = 100\)</span>, <span class="math inline">\(n_B = 100\)</span>, and <span class="math inline">\(n_{unknown} = 50\)</span> by default. The
<code>simulatePredictionData</code> function in the <code>IRRsim</code>
R package facilitates the simulation of the data matrix. The following
will generate two data frames for training and validating the predictive
models.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test1.train</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulatePredictionData.html">simulatePredictionData</a></span><span class="op">(</span></span>
<span>    mean1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, n1 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean2 <span class="op">=</span> <span class="fl">0.1</span>, n2 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean_unknown <span class="op">=</span> <span class="fl">0.0</span>, n_unknown <span class="op">=</span> <span class="fl">50</span>, ratio_unknown <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">test1.train</span><span class="op">$</span><span class="va">Y</span>, <span class="va">test1.train</span><span class="op">$</span><span class="va">Group</span><span class="op">)</span></span>
<span><span class="co">#&gt;    </span></span>
<span><span class="co">#&gt;       A   B  NA</span></span>
<span><span class="co">#&gt;   0 100   0  24</span></span>
<span><span class="co">#&gt;   1   0 100  26</span></span>
<span><span class="va">test1.valid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulatePredictionData.html">simulatePredictionData</a></span><span class="op">(</span></span>
<span>    mean1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, n1 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean2 <span class="op">=</span> <span class="fl">0.1</span>, n2 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean_unknown <span class="op">=</span> <span class="fl">0.0</span>, n_unknown <span class="op">=</span> <span class="fl">50</span>, ratio_unknown <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">test1.valid</span><span class="op">$</span><span class="va">Y</span>, <span class="va">test1.valid</span><span class="op">$</span><span class="va">Group</span><span class="op">)</span></span>
<span><span class="co">#&gt;    </span></span>
<span><span class="co">#&gt;       A   B  NA</span></span>
<span><span class="co">#&gt;   0 100   0  22</span></span>
<span><span class="co">#&gt;   1   0 100  28</span></span></code></pre></div>
<p>Logistic regression is used to train two predictive model using the
<code>glm</code> function in R: 1. Using all data in the training set
and 2. Only data from groups A and B, thereby excluding the uncertain
group which has a random outcome.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uncertain_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">test1.valid</span>, <span class="st">'labels'</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="va">test1.lr.full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span>, </span>
<span>                     data <span class="op">=</span> <span class="va">test1.train</span>, </span>
<span>                     family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test1.lr.known</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span>, </span>
<span>                      data <span class="op">=</span> <span class="va">test1.train</span><span class="op">[</span><span class="va">test1.train</span><span class="op">$</span><span class="va">Group</span> <span class="op">!=</span> <span class="va">uncertain_label</span>,<span class="op">]</span>, </span>
<span>                      family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test1.valid</span><span class="op">$</span><span class="va">Fitted.Full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">test1.lr.full</span>, newdata <span class="op">=</span> <span class="va">test1.valid</span><span class="op">)</span></span>
<span><span class="va">test1.valid</span><span class="op">$</span><span class="va">Fitted.Known</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">test1.lr.known</span>, newdata <span class="op">=</span> <span class="va">test1.valid</span><span class="op">)</span></span></code></pre></div>
<p>Figure 1 represents the distributions of the predictor variable for
each group separately along with the fitted logistic regression using
all the data in black and using only groups A and B in orange. This is a
fairly large effect of the predictor with a standardized difference of
1.0 between groups A and B. The mean for the uncertain group in this
example fall in the middle and has equal likelihood of an outcome of 0
or 1.</p>
<div class="figure">
<img src="LRsim_files/figure-html/unnamed-chunk-4-1.png" alt="Figure 1. Logistic Regression Plot" width="720"><p class="caption">
Figure 1. Logistic Regression Plot
</p>
</div>
<p>The accuracy of the predictions using the model trained with all the
data is 62% and for the model trained with only groups A and B is 63%.
The <code>simulateLR</code> function will facilitate simulating,
training, and validating many datasets (500 by default) with the same
parameters.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulatePredictionModels.html">simulatePredictionModels</a></span><span class="op">(</span></span>
<span>    mean1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, n1 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean2 <span class="op">=</span> <span class="fl">0.1</span>, n2 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    mean_unknown <span class="op">=</span> <span class="fl">0.0</span>, n_unknown <span class="op">=</span> <span class="fl">50</span>, ratio_unknown <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    sd <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<p>Figure 2 is a histogram of the differences in prediction accuracies
in the validation dataset between the models trained with all data minus
models trained excluding the disagreements. On average, training the
model with only agreement scores resulted in an increase accuracy of
1.17%.</p>
<div class="figure">
<img src="LRsim_files/figure-html/unnamed-chunk-6-1.png" alt="Figure 2. Distribution of differences in prediction accuracies." width="720"><p class="caption">
Figure 2. Distribution of differences in prediction accuracies.
</p>
</div>
</div>
<div class="section level2">
<h2 id="discussion">Discussion<a class="anchor" aria-label="anchor" href="#discussion"></a>
</h2>
<p>The reliability of measures used in predictive modeling are an
important contributor to the overall accuracy of the model. The
inclusion and exclusion of data in training datasets is an important
consideration for researhers and practioners. The impact of
disagreement, or uncertain scores on the accuracy of predictive models
will vary depending on the data available. To assist practioners in
estimatin the impact of uncertain scores on the accuracy of predictive
models, an R Shiny (Chang et al, 2019) application was developed (Figure
3).<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> This
application simulates many datasets using the parameters specified by
the user providing model accuracy estimates using all and agreement
data.</p>
<p><img src="LRsimShinyApp.png" alt="Shiny Application"><em>Figure
3.</em> Screenshot of the prediction model simulation Shiny
application</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Borray, A. (2017). Predicting Student Success with Big Data.
<em>EducauseReview</em>. Retrieved from <a href="https://er.educause.edu/blogs/2017/4/predicting-student-success-with-big-data" class="external-link uri">https://er.educause.edu/blogs/2017/4/predicting-student-success-with-big-data</a></p>
<p>Chang, W., Cheng, J., Allaire, J.J., Xie, Y. &amp; McPherson, J.
(2019). shiny: Web Application Framework for R. R package version
1.3.2.</p>
<p>Mayfield, E., &amp; Rosé, C.P. (2014). LightSIDE: Open source machine
learning. In M.D. Shermis and J. Burstein (Eds.), <em>Handbook of
Automated Essay Evaluation: Current Applications and New Directions</em>
(pp. 124-135). New York: Routledge.</p>
<p>Moskal, B.M., &amp; Leydens, J.A. (2000). Scoring rubric development:
Validity and reliability. <em>Practical Assessment, Research, &amp;
Evaluation, 7</em>(10).</p>
<p>R Core Team (2019). <em>R: A language and environment for statistical
computing.</em> R Foundation for Statistical Computing, Vienna, Austria.
URL <a href="https://www.R-project.org/" class="external-link uri">https://www.R-project.org/</a>.</p>
<p>Shermis, M.D., &amp; Hamner, B. (2012). <em>Contrasting
state-of-the-art automated scoring of essays: analysis.</em> Paper
presented at the National Council on Measurements in Education, 2012,
Vancouver, BC.</p>
<p>Venables, W. N. &amp; Ripley, B. D. (2002), <em>Modern Applied
Statistics with S.</em> Fourth Edition. Springer, New York.</p>
</div>
<div class="section level2">
<h2 id="appendix-a-essay-prompt-and-rubric">Appendix A: Essay Prompt and Rubric<a class="anchor" aria-label="anchor" href="#appendix-a-essay-prompt-and-rubric"></a>
</h2>
<p><strong>Essay Prompt</strong></p>
<p>Censorship in the Libraries</p>
<p>“All of us can think of a book that we hope none of our children or
any other children have taken off the shelf. But if I have the right to
remove that book from the shelf – that work I abhor – then you also have
exactly the same right and so does everyone else. And then we have no
books left on the shelf for any of us.” –Katherine Paterson, Author</p>
<p>Write a persuasive essay to a newspaper reflecting your vies on
censorship in libraries. Do you believe that certain materials, such as
books, music, movies, magazines, etc., should be removed from the
shelves if they are found offensive? Support your position with
convincing arguments from your own experience, observations, and/or
reading.</p>
<p><strong>Scoring Rubric</strong></p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>See <a href="https://www.kaggle.com/c/asap-aes" class="external-link uri">https://www.kaggle.com/c/asap-aes</a> for more information
on the competition.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The following function will run the Shiny application:
<code><a href="../reference/LRsim_demo.html">IRRsim::LRsim_demo()</a></code><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jason Bryer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
